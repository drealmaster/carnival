{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Chinenye\\\\Desktop\\\\DELIGHT\\\\MOVIES\\\\carnival\\\\src\\\\components\\\\accountBox\\\\signupForm.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState } from \"react\";\nimport { BoldLink, BoxContainer, FormContainer, Input, MutedLink, SubmitButton } from \"./common\";\nimport { Marginer } from \"../marginer\";\nimport { AccountContext } from \"./accountContext\";\nimport { auth, db, storage } from \"../../firebase\";\nimport { createUserWithEmailAndPassword, sendEmailVerification } from \"firebase/auth\";\nimport { collection, addDoc, setDoc, doc } from 'firebase/firestore';\nimport { getStorage, ref, uploadBytesResumable, getDownloadURL } from \"firebase/storage\";\nimport { useAuth } from '../../context/AuthContext';\nimport { useNavigate } from \"react-router-dom\";\nimport { ToastContainer, toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function SignupForm(props) {\n  _s();\n\n  // const { user } = useAuth()\n  const {\n    switchToSignin\n  } = useContext(AccountContext);\n  const [registerEmail, setRegisterEmail] = useState(\"\");\n  const [registerPassword, setRegisterPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [Image, setImage] = useState(\"\");\n  const [registerName, setRegisterName] = useState(\"\");\n  const storage = getStorage();\n  const navigate = useNavigate();\n\n  const uploadFile = file => {\n    if (!file) return;\n    const storageRef = ref(storage, `${Image.name}`);\n    const uploadTask = uploadBytesResumable(storageRef, file);\n  };\n\n  const register = async () => {\n    try {\n      const user = await createUserWithEmailAndPassword(auth, registerEmail, registerPassword);\n      setRegisterEmail(\"\");\n      setRegisterPassword(\"\");\n      console.log(user.user.uid); // await sendEmailVerification(user)\n      // const UserColRef = collection(db, 'users')\n      // const UserDoc = UserColRef.setDoc(doc(user.user.uid))\n      // addDoc(UserDoc, {\n      //   name: registerName,\n      //   email: registerEmail,\n      //   password: registerPassword,\n      //   id: user.user.uid\n      // });\n\n      setDoc(doc(db, 'users', user.user.uid), {\n        name: registerName,\n        email: registerEmail,\n        password: registerPassword,\n        id: user.user.uid,\n        deposit: 0.00,\n        payout: 0.00\n      });\n      uploadFile(Image);\n      navigate('/dashboard');\n    } catch (error) {\n      console.log(error.message);\n    }\n  }; //   sendEmailVerification(user)\n  //   .then((doc) => {\n  // console.log(doc);\n  //   })\n\n\n  return /*#__PURE__*/_jsxDEV(BoxContainer, {\n    children: [/*#__PURE__*/_jsxDEV(FormContainer, {\n      className: \"add\",\n      children: [/*#__PURE__*/_jsxDEV(Input, {\n        type: \"text\",\n        name: \"name\",\n        placeholder: \"Full Name\",\n        onChange: event => {\n          setRegisterName(event.target.value);\n        },\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"email\",\n        placeholder: \"Email\",\n        name: \"email\",\n        onChange: event => {\n          setRegisterEmail(event.target.value);\n        },\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"password\",\n        placeholder: \"Password\",\n        name: \"password\",\n        onChange: event => {\n          setRegisterPassword(event.target.value);\n        },\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"password\",\n        placeholder: \"Confirm Password\",\n        onChange: event => {\n          setConfirmPassword(event.target.value);\n        },\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"label\",\n        children: \"ID verification\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"file\",\n        onChange: event => {\n          setImage(event.target.files[0]);\n        },\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Marginer, {\n      direction: \"vertical\",\n      margin: 10\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SubmitButton, {\n      onClick: register,\n      type: \"submit\",\n      children: \"Signup\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Marginer, {\n      direction: \"vertical\",\n      margin: \"1em\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MutedLink, {\n      href: \"#\",\n      children: [\"Already have an account?\", /*#__PURE__*/_jsxDEV(BoldLink, {\n        onClick: switchToSignin,\n        children: \"Signin\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SignupForm, \"XUqBROCysGewWSTO+X92145wA+w=\", false, function () {\n  return [useNavigate];\n});\n\n_c = SignupForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignupForm\");","map":{"version":3,"sources":["C:/Users/Chinenye/Desktop/DELIGHT/MOVIES/carnival/src/components/accountBox/signupForm.jsx"],"names":["React","useContext","useState","BoldLink","BoxContainer","FormContainer","Input","MutedLink","SubmitButton","Marginer","AccountContext","auth","db","storage","createUserWithEmailAndPassword","sendEmailVerification","collection","addDoc","setDoc","doc","getStorage","ref","uploadBytesResumable","getDownloadURL","useAuth","useNavigate","ToastContainer","toast","SignupForm","props","switchToSignin","registerEmail","setRegisterEmail","registerPassword","setRegisterPassword","confirmPassword","setConfirmPassword","Image","setImage","registerName","setRegisterName","navigate","uploadFile","file","storageRef","name","uploadTask","register","user","console","log","uid","email","password","id","deposit","payout","error","message","event","target","value","files"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from \"react\";\r\nimport {\r\n  BoldLink,\r\n  BoxContainer,\r\n  FormContainer,\r\n  Input,\r\n  MutedLink,\r\n  SubmitButton,\r\n} from \"./common\";\r\nimport { Marginer } from \"../marginer\";\r\nimport { AccountContext } from \"./accountContext\";\r\nimport { auth, db, storage} from \"../../firebase\"\r\nimport {\r\n  createUserWithEmailAndPassword,\r\n  sendEmailVerification\r\n} from \"firebase/auth\";\r\nimport {\r\n  collection,\r\n  addDoc,\r\n  setDoc,\r\n  doc\r\n} from 'firebase/firestore'\r\nimport { getStorage, ref, uploadBytesResumable, getDownloadURL } from \"firebase/storage\";\r\nimport { useAuth } from '../../context/AuthContext'\r\n\r\nimport { useNavigate } from \"react-router-dom\"\r\nimport { ToastContainer, toast } from 'react-toastify';\r\n\r\n\r\n\r\n\r\nexport function SignupForm(props) {\r\n  // const { user } = useAuth()\r\n  const { switchToSignin } = useContext(AccountContext);\r\n  const [registerEmail, setRegisterEmail] = useState(\"\");\r\n  const [registerPassword, setRegisterPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [Image, setImage] = useState(\"\")\r\n  \r\n  const [registerName, setRegisterName] = useState(\"\");\r\n\r\nconst storage = getStorage();\r\n\r\n  const navigate = useNavigate();\r\n\r\n\r\n      const uploadFile = (file) => {\r\n        if(!file) return;\r\n       \r\n       \r\n        const storageRef = ref(storage, `${Image.name}`)\r\n        const uploadTask = uploadBytesResumable(storageRef, file)\r\n\r\n      }\r\n\r\n  \r\n\r\n  const register = async () => {\r\n\r\n\r\n\r\n    try {\r\n      const user = await createUserWithEmailAndPassword(\r\n        auth,\r\n        registerEmail,\r\n        registerPassword,\r\n      );\r\n      setRegisterEmail(\"\")\r\n      setRegisterPassword(\"\")\r\n      console.log(user.user.uid);\r\n      // await sendEmailVerification(user)\r\n    \r\n      // const UserColRef = collection(db, 'users')\r\n\r\n      // const UserDoc = UserColRef.setDoc(doc(user.user.uid))\r\n      \r\n      \r\n      // addDoc(UserDoc, {\r\n      //   name: registerName,\r\n      //   email: registerEmail,\r\n      //   password: registerPassword,\r\n      //   id: user.user.uid\r\n      // });\r\n      \r\n      setDoc(doc(db, 'users', user.user.uid), {\r\n        name: registerName,\r\n        email: registerEmail,\r\n        password: registerPassword,\r\n        id: user.user.uid,\r\n        deposit: 0.00,\r\n        payout: 0.00\r\n      });\r\n  \r\n \r\n      uploadFile(Image)\r\n      navigate('/dashboard');\r\n      \r\n    } catch (error) {\r\n      console.log(error.message);\r\n    }\r\n  };\r\n\r\n//   sendEmailVerification(user)\r\n//   .then((doc) => {\r\n// console.log(doc);\r\n//   })\r\n\r\n  return (\r\n    <BoxContainer>\r\n      <FormContainer className='add'>\r\n        <Input type=\"text\" name=\"name\" placeholder=\"Full Name\" \r\n  onChange={(event) => {\r\n    setRegisterName(event.target.value);\r\n  }}  required />\r\n        <Input type=\"email\" placeholder=\"Email\" name=\"email\" onChange={(event) => {\r\n    setRegisterEmail(event.target.value);\r\n  }}  required />\r\n        <Input type=\"password\" placeholder=\"Password\" name=\"password\"  onChange={(event) => {\r\n    setRegisterPassword(event.target.value);\r\n  }}  required />\r\n        <Input type=\"password\" placeholder=\"Confirm Password\"  onChange={(event) => {\r\n    setConfirmPassword(event.target.value);\r\n  }}    required  /> \r\n  <label className='label'>ID verification</label>\r\n        <Input type=\"file\" onChange={(event) => {\r\n    setImage(event.target.files[0]);\r\n  }} required  /> \r\n      </FormContainer>\r\n      <Marginer direction=\"vertical\" margin={10} />\r\n      <SubmitButton  onClick={register} type=\"submit\">Signup</SubmitButton>\r\n      <Marginer direction=\"vertical\" margin=\"1em\" />\r\n      <MutedLink href=\"#\">\r\n        Already have an account?\r\n        <BoldLink onClick={switchToSignin}>\r\n          Signin\r\n        </BoldLink>\r\n      </MutedLink>\r\n    </BoxContainer>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}