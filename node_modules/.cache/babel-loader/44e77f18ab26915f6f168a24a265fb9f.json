{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Chinenye/Desktop/DELIGHT/MOVIES/carnival/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Chinenye/Desktop/DELIGHT/MOVIES/carnival/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Chinenye/Desktop/DELIGHT/MOVIES/carnival/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from\"react\";import{BoldLink,BoxContainer,FormContainer,Input,MutedLink,SubmitButton}from\"./common\";import{Marginer}from\"../marginer\";import{AccountContext}from\"./accountContext\";import{auth,db,storage}from\"../../firebase\";import{createUserWithEmailAndPassword,sendEmailVerification}from\"firebase/auth\";import{collection,addDoc,setDoc,doc}from'firebase/firestore';import{getStorage,ref,uploadBytesResumable,getDownloadURL}from\"firebase/storage\";import{useAuth}from'../../context/AuthContext';import{useNavigate}from\"react-router-dom\";import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function SignupForm(props){// const { user } = useAuth()\nvar _useContext=useContext(AccountContext),switchToSignin=_useContext.switchToSignin;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),registerEmail=_useState2[0],setRegisterEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),registerPassword=_useState4[0],setRegisterPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),confirmPassword=_useState6[0],setConfirmPassword=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),Image=_useState8[0],setImage=_useState8[1];console.log(Image);var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),registerName=_useState10[0],setRegisterName=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),progress=_useState12[0],setprogress=_useState12[1];var storage=getStorage();var navigate=useNavigate();var uploadFile=function uploadFile(file){if(!file)return;var storageRef=ref(storage,\"\".concat(Image.name));var uploadTask=uploadBytesResumable(storageRef,file);// uploadTask.on(\"state_changed\", (snapshot) => {\n//   const prog = Math.round((snapshot.bytesTransferred / snapshot.totalBytes) * 100)\n//   setprogress(prog)\n// }, (err) => console.log(err),\n// () => {\n//      getDownloadURL(uploadTask.snapshot.ref)\n//      .then(url => console.log(url))\n// }\n// )\n};var register=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(registerPassword!==confirmPassword){toast.succ(\"password doesnt match!!\",{position:\"top-right\",autoClose:5000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});}_context.prev=1;_context.next=4;return createUserWithEmailAndPassword(auth,registerEmail,registerPassword);case 4:user=_context.sent;setRegisterEmail(\"\");setRegisterPassword(\"\");console.log(user.user.uid);// await sendEmailVerification(user)\n// const UserColRef = collection(db, 'users')\n// const UserDoc = UserColRef.setDoc(doc(user.user.uid))\n// addDoc(UserDoc, {\n//   name: registerName,\n//   email: registerEmail,\n//   password: registerPassword,\n//   id: user.user.uid\n// });\nsetDoc(doc(db,'users',user.user.uid),{name:registerName,email:registerEmail,password:registerPassword,id:user.user.uid,deposit:0.00,payout:0.00});// const file = e.target[0].files[0]\n// console.log(file);\n//  uploadFile(file)\nuploadFile(Image);navigate('/dashboard');_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);console.log(_context.t0.message);case 16:case\"end\":return _context.stop();}}},_callee,null,[[1,13]]);}));return function register(){return _ref.apply(this,arguments);};}();//   sendEmailVerification(user)\n//   .then((doc) => {\n// console.log(doc);\n//   })\nreturn/*#__PURE__*/_jsxs(BoxContainer,{children:[/*#__PURE__*/_jsxs(FormContainer,{className:\"add\",children:[/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"name\",placeholder:\"Full Name\",onChange:function onChange(event){setRegisterName(event.target.value);},required:true}),/*#__PURE__*/_jsx(Input,{type:\"email\",placeholder:\"Email\",name:\"email\",onChange:function onChange(event){setRegisterEmail(event.target.value);},required:true}),/*#__PURE__*/_jsx(Input,{type:\"password\",placeholder:\"Password\",name:\"password\",onChange:function onChange(event){setRegisterPassword(event.target.value);},required:true}),/*#__PURE__*/_jsx(Input,{type:\"password\",placeholder:\"Confirm Password\",onChange:function onChange(event){setConfirmPassword(event.target.value);},required:true}),/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"ID verification\"}),/*#__PURE__*/_jsx(Input,{type:\"file\",onChange:function onChange(event){setImage(event.target.files[0]);},required:true})]}),/*#__PURE__*/_jsx(Marginer,{direction:\"vertical\",margin:10}),/*#__PURE__*/_jsx(SubmitButton,{onClick:register,type:\"submit\",children:\"Signup\"}),/*#__PURE__*/_jsx(ToastContainer,{position:\"top-right\",autoClose:5000,hideProgressBar:false,newestOnTop:false,closeOnClick:true,rtl:false,pauseOnFocusLoss:true,draggable:true,pauseOnHover:true}),/*#__PURE__*/_jsx(Marginer,{direction:\"vertical\",margin:\"1em\"}),/*#__PURE__*/_jsxs(MutedLink,{href:\"#\",children:[\"Already have an account?\",/*#__PURE__*/_jsx(BoldLink,{onClick:switchToSignin,children:\"Signin\"})]})]});}","map":{"version":3,"sources":["C:/Users/Chinenye/Desktop/DELIGHT/MOVIES/carnival/src/components/accountBox/signupForm.jsx"],"names":["React","useContext","useState","BoldLink","BoxContainer","FormContainer","Input","MutedLink","SubmitButton","Marginer","AccountContext","auth","db","storage","createUserWithEmailAndPassword","sendEmailVerification","collection","addDoc","setDoc","doc","getStorage","ref","uploadBytesResumable","getDownloadURL","useAuth","useNavigate","ToastContainer","toast","SignupForm","props","switchToSignin","registerEmail","setRegisterEmail","registerPassword","setRegisterPassword","confirmPassword","setConfirmPassword","Image","setImage","console","log","registerName","setRegisterName","progress","setprogress","navigate","uploadFile","file","storageRef","name","uploadTask","register","succ","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","undefined","user","uid","email","password","id","deposit","payout","message","event","target","value","files"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from \"react\";\r\nimport {\r\n  BoldLink,\r\n  BoxContainer,\r\n  FormContainer,\r\n  Input,\r\n  MutedLink,\r\n  SubmitButton,\r\n} from \"./common\";\r\nimport { Marginer } from \"../marginer\";\r\nimport { AccountContext } from \"./accountContext\";\r\nimport { auth, db, storage} from \"../../firebase\"\r\nimport {\r\n  createUserWithEmailAndPassword,\r\n  sendEmailVerification\r\n} from \"firebase/auth\";\r\nimport {\r\n  collection,\r\n  addDoc,\r\n  setDoc,\r\n  doc\r\n} from 'firebase/firestore'\r\nimport { getStorage, ref, uploadBytesResumable, getDownloadURL } from \"firebase/storage\";\r\nimport { useAuth } from '../../context/AuthContext'\r\n\r\nimport { useNavigate } from \"react-router-dom\"\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\n\r\n\r\nexport function SignupForm(props) {\r\n  // const { user } = useAuth()\r\n  const { switchToSignin } = useContext(AccountContext);\r\n  const [registerEmail, setRegisterEmail] = useState(\"\");\r\n  const [registerPassword, setRegisterPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [Image, setImage] = useState(\"\")\r\n  console.log(Image);\r\n  \r\n  const [registerName, setRegisterName] = useState(\"\");\r\n  const [progress, setprogress] = useState(0)\r\n\r\nconst storage = getStorage();\r\n\r\n  const navigate = useNavigate();\r\n\r\n\r\n      const uploadFile = (file) => {\r\n        if(!file) return;\r\n\r\n       \r\n       \r\n       \r\n       \r\n       \r\n       \r\n        const storageRef = ref(storage, `${Image.name}`)\r\n        const uploadTask = uploadBytesResumable(storageRef, file)\r\n\r\n        // uploadTask.on(\"state_changed\", (snapshot) => {\r\n        //   const prog = Math.round((snapshot.bytesTransferred / snapshot.totalBytes) * 100)\r\n\r\n\r\n        //   setprogress(prog)\r\n        // }, (err) => console.log(err),\r\n        // () => {\r\n        //      getDownloadURL(uploadTask.snapshot.ref)\r\n        //      .then(url => console.log(url))\r\n        // }\r\n        \r\n        // )\r\n\r\n      }\r\n\r\n  \r\n\r\n  const register = async () => {\r\n  \r\n    if (registerPassword !== confirmPassword) {\r\n      toast.succ(\"password doesnt match!!\", {\r\n        position: \"top-right\",\r\n        autoClose: 5000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      });\r\n      \r\n    }\r\n\r\n\r\n    try {\r\n      const user = await createUserWithEmailAndPassword(\r\n        auth,\r\n        registerEmail,\r\n        registerPassword,\r\n      );\r\n      setRegisterEmail(\"\")\r\n      setRegisterPassword(\"\")\r\n      console.log(user.user.uid);\r\n      // await sendEmailVerification(user)\r\n    \r\n      // const UserColRef = collection(db, 'users')\r\n\r\n      // const UserDoc = UserColRef.setDoc(doc(user.user.uid))\r\n      \r\n      \r\n      // addDoc(UserDoc, {\r\n      //   name: registerName,\r\n      //   email: registerEmail,\r\n      //   password: registerPassword,\r\n      //   id: user.user.uid\r\n      // });\r\n      \r\n      setDoc(doc(db, 'users', user.user.uid), {\r\n        name: registerName,\r\n        email: registerEmail,\r\n        password: registerPassword,\r\n        id: user.user.uid,\r\n        deposit: 0.00,\r\n        payout: 0.00\r\n      });\r\n      // const file = e.target[0].files[0]\r\n// console.log(file);\r\n//  uploadFile(file)\r\n\r\n \r\n      uploadFile(Image)\r\n      navigate('/dashboard');\r\n      \r\n    } catch (error) {\r\n      console.log(error.message);\r\n    }\r\n  };\r\n\r\n//   sendEmailVerification(user)\r\n//   .then((doc) => {\r\n// console.log(doc);\r\n//   })\r\n\r\n  return (\r\n    <BoxContainer>\r\n      <FormContainer className='add'>\r\n        <Input type=\"text\" name=\"name\" placeholder=\"Full Name\" \r\n  onChange={(event) => {\r\n    setRegisterName(event.target.value);\r\n  }}  required />\r\n        <Input type=\"email\" placeholder=\"Email\" name=\"email\" onChange={(event) => {\r\n    setRegisterEmail(event.target.value);\r\n  }}  required />\r\n        <Input type=\"password\" placeholder=\"Password\" name=\"password\"  onChange={(event) => {\r\n    setRegisterPassword(event.target.value);\r\n  }}  required />\r\n        <Input type=\"password\" placeholder=\"Confirm Password\"  onChange={(event) => {\r\n    setConfirmPassword(event.target.value);\r\n  }}    required  /> \r\n  <label className='label'>ID verification</label>\r\n        <Input type=\"file\" onChange={(event) => {\r\n    setImage(event.target.files[0]);\r\n  }} required  /> \r\n      </FormContainer>\r\n      <Marginer direction=\"vertical\" margin={10} />\r\n      <SubmitButton  onClick={register} type=\"submit\">Signup</SubmitButton>\r\n      {/* {error ? {error} : ''} */}\r\n      <ToastContainer \r\n      position=\"top-right\"\r\n      autoClose={5000}\r\n      hideProgressBar={false}\r\n      newestOnTop={false}\r\n      closeOnClick\r\n      rtl={false}\r\n      pauseOnFocusLoss\r\n      draggable\r\n      pauseOnHover />\r\n      <Marginer direction=\"vertical\" margin=\"1em\" />\r\n      <MutedLink href=\"#\">\r\n        Already have an account?\r\n        <BoldLink onClick={switchToSignin}>\r\n          Signin\r\n        </BoldLink>\r\n      </MutedLink>\r\n    </BoxContainer>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}